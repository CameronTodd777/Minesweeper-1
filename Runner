import javafx.application.Application;
import javafx.scene.Parent;
import javafx.scene.Scene;
import javafx.scene.control.Menu;
import javafx.scene.control.MenuBar;
import javafx.scene.control.MenuItem;
import javafx.scene.layout.BorderPane;
import javafx.stage.Stage;

public class Runner extends Application {

    private final double TILE_WIDTH = 30;
    private final double TILE_HEIGHT = 30;
    private final int NUM_ROWS = 15;
    private final int NUM_COLS = 25;

    private BorderPane root;
    private GameBoard board;
    private Display display;

    private Parent setUpScene() {
        root = new BorderPane();
        root.setPrefSize(NUM_COLS * TILE_WIDTH, NUM_ROWS * TILE_HEIGHT);

        display = new Display(NUM_COLS * TILE_WIDTH);

        board = new GameBoard(NUM_ROWS, NUM_COLS, TILE_WIDTH, TILE_HEIGHT);

        root.setBottom(board);
        root.setCenter(display);
        setUpMenu();

        return root;
    }

    public void setUpMenu() {
        Menu fileMenu = new Menu("Game");
        MenuItem replay = new MenuItem("Replay");
        replay.setOnAction(event -> replay());
        fileMenu.getItems().add(replay);

        MenuBar menuBar = new MenuBar();
        menuBar.getMenus().addAll(fileMenu);

        root.setTop(menuBar);
    }

    public void replay() {
        root.getChildren().clear();

        display = new Display(NUM_COLS * TILE_WIDTH);
        board = new GameBoard(NUM_ROWS, NUM_COLS, TILE_WIDTH, TILE_HEIGHT);
        setUpMenu();

        root.setBottom(board);
        root.setCenter(display);
    }

    public void start(Stage primaryStage) {
        primaryStage.setScene(new Scene(setUpScene()));
        primaryStage.setTitle("Minesweeper");
        primaryStage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
}
